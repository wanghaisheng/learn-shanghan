<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>排行榜</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: linear-gradient(135deg, #7C3AED 0%, #4F46E5 100%);
      background-attachment: fixed;
      padding-bottom: 90px;
    }
    
    .rank-card {
      transition: all 0.3s ease;
    }
    
    .rank-card:active {
      transform: scale(0.98);
    }
    
    .rank-number {
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      font-weight: bold;
    }
    
    .tab-selector {
      display: flex;
      background-color: rgba(0, 0, 0, 0.2);
      border-radius: 99px;
      padding: 4px;
    }
    
    .tab-option {
      flex: 1;
      text-align: center;
      padding: 8px;
      border-radius: 99px;
      font-weight: medium;
      font-size: 14px;
      transition: all 0.3s ease;
    }
    
    .tab-option.active {
      background-color: #6D28D9;
    }
    
    .medal-1 {
      background: linear-gradient(to bottom right, #FFD700, #FFA500);
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
    }
    
    .medal-2 {
      background: linear-gradient(to bottom right, #C0C0C0, #A0A0A0);
      box-shadow: 0 0 10px rgba(192, 192, 192, 0.7);
    }
    
    .medal-3 {
      background: linear-gradient(to bottom right, #CD7F32, #A05A2C);
      box-shadow: 0 0 10px rgba(205, 127, 50, 0.7);
    }
    
    @keyframes pulse {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
      100% {
        transform: scale(1);
      }
    }
    
    .pulse {
      animation: pulse 2s infinite;
    }
    
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: rgba(26, 32, 44, 0.9);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    
    .shine-effect {
      position: relative;
      overflow: hidden;
    }
    
    .shine-effect::after {
      content: "";
      position: absolute;
      top: -110%;
      left: -210%;
      width: 200%;
      height: 200%;
      opacity: 0;
      transform: rotate(30deg);
      background: rgba(255, 255, 255, 0.13);
      background: linear-gradient(
        to right, 
        rgba(255, 255, 255, 0.13) 0%,
        rgba(255, 255, 255, 0.13) 77%,
        rgba(255, 255, 255, 0.5) 92%,
        rgba(255, 255, 255, 0.0) 100%
      );
      animation: shine 3s infinite;
    }
    
    @keyframes shine {
      10% {
        opacity: 1;
        top: -30%;
        left: -30%;
        transition-property: left, top, opacity;
        transition-duration: 0.7s, 0.7s, 0.15s;
        transition-timing-function: ease;
      }
      100% {
        opacity: 0;
        top: -30%;
        left: -30%;
      }
    }
  </style>
</head>
<body class="text-white">
  <div class="container mx-auto px-4 pt-6 pb-24">
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-2xl font-bold">排行榜</h1>
      
      <div class="tab-selector">
        <div class="tab-option active">周榜</div>
        <div class="tab-option">月榜</div>
        <div class="tab-option">总榜</div>
      </div>
    </div>
    
    <!-- 排行榜信息 -->
    <div class="bg-yellow-600 bg-opacity-70 text-white py-2 px-4 rounded-lg text-center text-sm mb-4">
      <i class="fas fa-info-circle mr-2"></i>点击榜单中的用户可以获得奖励币，用于兑换副本和VIP体验
    </div>
    
    <div class="bg-blue-600 bg-opacity-70 text-white py-2 px-4 rounded-lg text-center text-sm mb-4">
      <i class="fas fa-crown mr-2"></i>每日前100名完成挑战的用户可获得额外奖励，其他用户可获得默认奖励加成
    </div>
    
    <div class="bg-white bg-opacity-10 backdrop-filter backdrop-blur-md rounded-xl p-4 mb-6">
      <div class="flex justify-between items-center mb-3">
        <h2 class="font-bold text-lg">本周学习排名</h2>
        <span class="text-xs bg-purple-600 rounded-full px-2 py-1">更新于 2小时前</span>
      </div>
      
      <p class="text-sm text-purple-200 mb-4">你当前排名：第12名</p>
      
      <!-- 前三名 -->
      <div class="flex space-x-3 mb-6">
        <!-- 第二名 -->
        <div class="flex-1 text-center">
          <div class="relative">
            <div class="w-16 h-16 bg-gradient-to-br from-gray-300 to-gray-500 rounded-full flex items-center justify-center mx-auto mb-2 medal-2">
              <span class="text-xl font-bold">2</span>
            </div>
            <div class="absolute -top-1 -right-1 w-6 h-6 bg-silver rounded-full flex items-center justify-center medal-2">
              <i class="fas fa-medal text-white"></i>
            </div>
          </div>
          <div class="w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-1">
            <i class="fas fa-user text-gray-300"></i>
          </div>
          <div class="font-medium">文曲星</div>
          <div class="text-xs text-purple-200">8120分</div>
        </div>
        
        <!-- 第一名 -->
        <div class="flex-1 text-center -mt-4">
          <div class="relative">
            <div class="w-20 h-20 bg-gradient-to-br from-yellow-300 to-yellow-600 rounded-full flex items-center justify-center mx-auto mb-2 medal-1 pulse">
              <span class="text-2xl font-bold">1</span>
            </div>
            <div class="absolute -top-1 -right-1 w-8 h-8 bg-gold rounded-full flex items-center justify-center medal-1">
              <i class="fas fa-crown text-white"></i>
            </div>
          </div>
          <div class="w-14 h-14 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-1 shine-effect">
            <i class="fas fa-user-graduate text-yellow-300 text-xl"></i>
          </div>
          <div class="font-bold text-lg">学霸007</div>
          <div class="text-sm text-yellow-300">9540分</div>
        </div>
        
        <!-- 第三名 -->
        <div class="flex-1 text-center">
          <div class="relative">
            <div class="w-16 h-16 bg-gradient-to-br from-yellow-700 to-yellow-900 rounded-full flex items-center justify-center mx-auto mb-2 medal-3">
              <span class="text-xl font-bold">3</span>
            </div>
            <div class="absolute -top-1 -right-1 w-6 h-6 bg-bronze rounded-full flex items-center justify-center medal-3">
              <i class="fas fa-award text-white"></i>
            </div>
          </div>
          <div class="w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-1">
            <i class="fas fa-user text-yellow-700"></i>
          </div>
          <div class="font-medium">勤奋小达人</div>
          <div class="text-xs text-purple-200">7850分</div>
        </div>
      </div>
      
      <!-- 排行榜列表 -->
      <div class="space-y-3">
        <!-- 第4名 -->
        <div class="bg-white bg-opacity-10 rounded-lg p-3 flex items-center rank-card" onclick="giveUserReward('知识守门人', 10)">
          <div class="rank-number bg-gray-600 text-white mr-3">4</div>
          <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center mr-3">
            <i class="fas fa-user text-white"></i>
          </div>
          <div class="flex-1">
            <div class="font-medium">知识守门人</div>
            <div class="text-xs text-purple-200">7天连续学习</div>
          </div>
          <div class="text-right">
            <div class="font-bold">7230</div>
            <div class="text-xs text-purple-200">分数</div>
          </div>
        </div>
        
        <!-- 第5名 -->
        <div class="bg-white bg-opacity-10 rounded-lg p-3 flex items-center rank-card" onclick="giveUserReward('中医小达人', 10)">
          <div class="rank-number bg-gray-600 text-white mr-3">5</div>
          <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center mr-3">
            <i class="fas fa-user text-white"></i>
          </div>
          <div class="flex-1">
            <div class="font-medium">中医小达人</div>
            <div class="text-xs text-purple-200">5天连续学习</div>
          </div>
          <div class="text-right">
            <div class="font-bold">6950</div>
            <div class="text-xs text-purple-200">分数</div>
          </div>
        </div>
        
        <!-- 第6名 -->
        <div class="bg-white bg-opacity-10 rounded-lg p-3 flex items-center rank-card" onclick="giveUserReward('药王传人', 10)">
          <div class="rank-number bg-gray-600 text-white mr-3">6</div>
          <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center mr-3">
            <i class="fas fa-user text-white"></i>
          </div>
          <div class="flex-1">
            <div class="font-medium">药王传人</div>
            <div class="text-xs text-purple-200">12天连续学习</div>
          </div>
          <div class="text-right">
            <div class="font-bold">6780</div>
            <div class="text-xs text-purple-200">分数</div>
          </div>
        </div>
        
        <!-- 分割线 -->
        <div class="border-t border-white border-opacity-20 my-4"></div>
        
        <!-- 当前用户 -->
        <div class="bg-purple-700 bg-opacity-70 rounded-lg p-3 flex items-center rank-card">
          <div class="rank-number bg-purple-800 text-white mr-3">12</div>
          <div class="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center mr-3">
            <i class="fas fa-user-astronaut text-white"></i>
          </div>
          <div class="flex-1">
            <div class="font-medium">冒险者</div>
            <div class="text-xs text-purple-200">8天连续学习</div>
          </div>
          <div class="text-right">
            <div class="font-bold">4850</div>
            <div class="text-xs text-purple-200">分数</div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 排行榜奖励 -->
    <div class="bg-white bg-opacity-10 backdrop-filter backdrop-blur-md rounded-xl p-4 mb-6">
      <h2 class="font-bold text-lg mb-3">
        <i class="fas fa-gift text-yellow-300 mr-2"></i>排行榜奖励
      </h2>
      
      <div class="space-y-3">
        <div class="flex items-center">
          <div class="w-10 h-10 bg-gradient-to-br from-yellow-300 to-yellow-600 rounded-full flex items-center justify-center mr-3 medal-1">
            <span class="font-bold">1</span>
          </div>
          <div class="flex-1">
            <div class="font-medium">第一名</div>
            <div class="text-xs text-purple-200">伤寒论专家头衔 + 500宝石</div>
          </div>
        </div>
        
        <div class="flex items-center">
          <div class="w-10 h-10 bg-gradient-to-br from-gray-300 to-gray-500 rounded-full flex items-center justify-center mr-3 medal-2">
            <span class="font-bold">2</span>
          </div>
          <div class="flex-1">
            <div class="font-medium">第二名</div>
            <div class="text-xs text-purple-200">勤学奖励 + 300宝石</div>
          </div>
        </div>
        
        <div class="flex items-center">
          <div class="w-10 h-10 bg-gradient-to-br from-yellow-700 to-yellow-900 rounded-full flex items-center justify-center mr-3 medal-3">
            <span class="font-bold">3</span>
          </div>
          <div class="flex-1">
            <div class="font-medium">第三名</div>
            <div class="text-xs text-purple-200">铜牌收藏家 + 200宝石</div>
          </div>
        </div>
        
        <div class="flex items-center">
          <div class="w-10 h-10 bg-gray-600 rounded-full flex items-center justify-center mr-3">
            <span class="font-bold">4-10</span>
          </div>
          <div class="flex-1">
            <div class="font-medium">前十名</div>
            <div class="text-xs text-purple-200">学霸勋章 + 100宝石</div>
          </div>
        </div>
        
        <div class="flex items-center">
          <div class="w-10 h-10 bg-green-600 rounded-full flex items-center justify-center mr-3">
            <span class="font-bold">11-100</span>
          </div>
          <div class="flex-1">
            <div class="font-medium">前100名</div>
            <div class="text-xs text-purple-200">额外奖励 + 50宝石</div>
          </div>
        </div>
        
        <div class="flex items-center">
          <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center mr-3">
            <span class="font-bold">所有用户</span>
          </div>
          <div class="flex-1">
            <div class="font-medium">参与奖励</div>
            <div class="text-xs text-purple-200">默认奖励加成 10%</div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 排行榜规则 -->
    <div class="bg-white bg-opacity-10 backdrop-filter backdrop-blur-md rounded-xl p-4 mb-6">
      <h2 class="font-bold text-lg mb-3">
        <i class="fas fa-scroll text-yellow-300 mr-2"></i>排行榜规则
      </h2>
      
      <div class="text-sm text-purple-200 space-y-2">
        <p>1. 每完成一次挑战获得10分</p>
        <p>2. 连续学习天数 × 50分额外奖励</p>
        <p>3. 完成每日挑战获得100分</p>
        <p>4. 排名每周一凌晨重置</p>
        <p>5. 连续三周获得第一可解锁稀有头像框</p>
      </div>
    </div>
  </div>
  
  <!-- 底部导航 -->
  <div class="bottom-nav text-white py-2 px-4">
    <div class="flex justify-around items-center">
      <div class="text-center">
        <button onclick="navigateTo('home.html')" class="w-12 h-12 rounded-full bg-black bg-opacity-40 flex items-center justify-center mx-auto">
          <i class="fas fa-home text-xl"></i>
        </button>
        <span class="text-xs mt-1 block">主页</span>
      </div>
      
      <div class="text-center">
        <button onclick="navigateTo('training.html')" class="w-12 h-12 rounded-full bg-black bg-opacity-40 flex items-center justify-center mx-auto">
          <i class="fas fa-dumbbell text-xl"></i>
        </button>
        <span class="text-xs mt-1 block">训练</span>
      </div>
      
      <div class="text-center">
        <button onclick="navigateTo('ranking.html')" class="w-12 h-12 rounded-full bg-gradient-to-r from-purple-600 to-indigo-600 flex items-center justify-center mx-auto">
          <i class="fas fa-trophy text-xl"></i>
        </button>
        <span class="text-xs mt-1 block">排行榜</span>
      </div>
      
      <div class="text-center">
        <button onclick="navigateTo('statistics.html')" class="w-12 h-12 rounded-full bg-black bg-opacity-40 flex items-center justify-center mx-auto">
          <i class="fas fa-chart-line text-xl"></i>
        </button>
        <span class="text-xs mt-1 block">统计</span>
      </div>
      
      <div class="text-center">
        <button onclick="navigateTo('settings.html')" class="w-12 h-12 rounded-full bg-black bg-opacity-40 flex items-center justify-center mx-auto">
          <i class="fas fa-cog text-xl"></i>
        </button>
        <span class="text-xs mt-1 block">设置</span>
      </div>
    </div>
  </div>
  
  <script>
    // 标签切换
    document.addEventListener('DOMContentLoaded', function() {
      const tabOptions = document.querySelectorAll('.tab-option');
      
      tabOptions.forEach(tab => {
        tab.addEventListener('click', function() {
          tabOptions.forEach(t => t.classList.remove('active'));
          this.classList.add('active');
        });
      });
    });
    
    function navigateTo(route) {
      if (window.parent && window.parent.postMessage) {
        window.parent.postMessage({ route: route }, '*');
      } else {
        window.location.href = route;
      }
    }
    
    // 用户点击奖励功能
    function giveUserReward(userName, amount) {
      // 显示奖励提示
      const rewardToast = document.createElement('div');
      rewardToast.className = 'fixed top-1/4 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-yellow-500 to-yellow-600 text-white px-6 py-3 rounded-xl shadow-lg z-50 flex items-center';
      rewardToast.innerHTML = `
        <i class="fas fa-gift text-2xl mr-3 animate-bounce"></i>
        <div>
          <div class="font-bold">获得鼓励奖励！</div>
          <div class="text-sm">你为 ${userName} 送出了鼓励，获得 ${amount} 个奖励币</div>
        </div>
      `;
      document.body.appendChild(rewardToast);
      
      // 添加奖励币飞行效果
      for (let i = 0; i < 5; i++) {
        setTimeout(() => {
          const coin = document.createElement('div');
          coin.className = 'fixed z-50 text-yellow-300 animate-ping';
          coin.innerHTML = '<i class="fas fa-coins text-xl"></i>';
          coin.style.top = '50%';
          coin.style.left = '50%';
          document.body.appendChild(coin);
          
          // 延迟移除
          setTimeout(() => document.body.removeChild(coin), 1000);
        }, i * 200);
      }
      
      // 2秒后移除提示
      setTimeout(() => {
        document.body.removeChild(rewardToast);
        // 显示兑换提示
        showExchangeOptions();
      }, 2000);
    }
    
    // 显示奖励兑换选项
    function showExchangeOptions() {
      const exchangeModal = document.createElement('div');
      exchangeModal.className = 'fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50';
      exchangeModal.innerHTML = `
        <div class="bg-gradient-to-br from-purple-800 to-indigo-900 rounded-xl p-6 w-5/6 max-w-md">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold">奖励兑换</h3>
            <button onclick="this.parentNode.parentNode.parentNode.remove()" class="text-white">
              <i class="fas fa-times"></i>
            </button>
          </div>
          
          <p class="text-sm text-purple-200 mb-4">你可以用奖励币兑换以下物品：</p>
          
          <div class="space-y-3 mb-6">
            <div class="bg-white bg-opacity-10 rounded-lg p-3 flex items-center">
              <div class="w-12 h-12 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-full flex items-center justify-center mr-3 flex-shrink-0">
                <i class="fas fa-book text-white text-xl"></i>
              </div>
              <div class="flex-1">
                <div class="font-medium">《脉经》副本</div>
                <div class="text-xs text-purple-200">王叔和著作，系统分析诊脉方法</div>
              </div>
              <button class="bg-purple-600 hover:bg-purple-500 px-3 py-1 rounded-lg text-sm font-semibold">
                100币兑换
              </button>
            </div>
            
            <div class="bg-white bg-opacity-10 rounded-lg p-3 flex items-center">
              <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-teal-600 rounded-full flex items-center justify-center mr-3 flex-shrink-0">
                <i class="fas fa-crown text-white text-xl"></i>
              </div>
              <div class="flex-1">
                <div class="font-medium">VIP体验券</div>
                <div class="text-xs text-purple-200">7天VIP会员特权体验</div>
              </div>
              <button class="bg-purple-600 hover:bg-purple-500 px-3 py-1 rounded-lg text-sm font-semibold">
                50币兑换
              </button>
            </div>
            
            <div class="bg-white bg-opacity-10 rounded-lg p-3 flex items-center">
              <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mr-3 flex-shrink-0">
                <i class="fas fa-hat-wizard text-white text-xl"></i>
              </div>
              <div class="flex-1">
                <div class="font-medium">特殊头像框</div>
                <div class="text-xs text-purple-200">限定中医经典主题头像框</div>
              </div>
              <button class="bg-purple-600 hover:bg-purple-500 px-3 py-1 rounded-lg text-sm font-semibold">
                30币兑换
              </button>
            </div>
          </div>
          
          <div class="text-center">
            <button onclick="this.parentNode.parentNode.parentNode.remove()" class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 px-6 rounded-lg">
              关闭
            </button>
          </div>
        </div>
      `;
      document.body.appendChild(exchangeModal);
    }
    
    // 添加排行榜提示
    document.addEventListener('DOMContentLoaded', function() {
      // ... existing code ...
      
      // 添加点击提示
      const tipBanner = document.createElement('div');
      tipBanner.className = 'bg-yellow-600 bg-opacity-70 text-white py-2 px-4 rounded-lg text-center text-sm mb-4';
      tipBanner.innerHTML = '<i class="fas fa-info-circle mr-2"></i>点击榜单中的用户可以获得奖励币，用于兑换副本和VIP体验';
      
      // 插入到排行榜信息区域前面
      const rankingInfo = document.querySelector('.bg-white.bg-opacity-10.backdrop-filter');
      rankingInfo.parentNode.insertBefore(tipBanner, rankingInfo);
    });
  </script>
</body>
</html>